{"ast":null,"code":"import _objectSpread from\"E:/Code/Project/FunFarm/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"E:/Code/Project/FunFarm/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"E:/Code/Project/FunFarm/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/Code/Project/FunFarm/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"E:/Code/Project/FunFarm/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/Code/Project/FunFarm/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Nav from\"../../components/Nav\";import SidebarItem from\"../../components/SidebarItem.js\";import Land from\"./Land\";import\"../../styles/Farm.scss\";import{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";import ShopTool from\"./ShopTool\";import smallPot from\"../../assets/images/smallPot.png\";import bigPot from\"../../assets/images/bigPot.png\";import water from\"../../assets/images/water.png\";import scarecrow from\"../../assets/images/scarecrow.png\";import greenhouse from\"../../assets/images/greenhouse.png\";import sapling from\"../../assets/images/sapling.svg\";import mama from\"../../assets/images/mama.png\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var baseURL=\"http://localhost:3000\";var Farm=/*#__PURE__*/function(_Component){_inherits(Farm,_Component);var _super=_createSuper(Farm);function Farm(){var _this;_classCallCheck(this,Farm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={moneyAmount:500,reload:false,arrItems:[{type:1,amount:0,img:smallPot},{type:2,amount:0,img:bigPot},{type:3,amount:0,img:water},{type:4,amount:0,img:scarecrow},{type:5,amount:0,img:greenhouse}],arrPlantsInInventory:[{name:\"sapling\",type:0,amount:2,img:sapling},{name:\"mama\",type:1,amount:1,img:mama}],arrPlants:[]};_this.handleUseItem=function(type){if(_this.state.arrItems[type].amount<1){alert(\"dont enought item!\");return;}var arr=_toConsumableArray(_this.state.arrItems);arr[type]=_objectSpread(_objectSpread({},arr[type]),{},{amount:arr[type].amount-1});_this.setState({arrItems:arr});_this.props.dataUser.body.inventory.tools[type]--;};_this.handleBuyItem=function(type){//mảng test bên client\nvar arr=_toConsumableArray(_this.state.arrItems);arr[type]=_objectSpread(_objectSpread({},arr[type]),{},{amount:arr[type].amount+1});_this.setState({arrItems:arr});_this.props.dataUser.body.inventory.tools[type]++;if(type==0){if(_this.props.dataUser.body.inventory.moneyAmount<50){alert(\"Bạn không đủ số tiền để mua!\");}else{_this.props.dataUser.body.inventory.moneyAmount-=50;axios({method:\"post\",url:baseURL+\"/farm/buy-tool\",data:{username:_this.props.username,amount:1,toolType:type}}).then(function(res){res.data.status===1?alert(\"Buy success!\"):alert(\"Error\");});}}else if(type==1){if(_this.props.dataUser.body.inventory.moneyAmount<100){alert(\"Bạn không đủ số tiền để mua!\");}else{_this.props.dataUser.body.inventory.moneyAmount-=100;axios({method:\"post\",url:baseURL+\"/farm/buy-tool\",data:{username:_this.props.username,amount:1,toolType:type}}).then(function(res){res.data.status===1?alert(\"Buy success!\"):alert(\"Error\");});}}else if(type==2){if(_this.props.dataUser.body.inventory.moneyAmount<50){alert(\"Bạn không đủ số tiền để mua!\");}else{_this.props.dataUser.body.inventory.moneyAmount-=50;axios({method:\"post\",url:baseURL+\"/farm/buy-tool\",data:{username:_this.props.username,amount:1,toolType:type}}).then(function(res){res.data.status===1?alert(\"Buy success!\"):alert(\"Error\");});}}else if(type==3){if(_this.props.dataUser.body.inventory.moneyAmount<20){alert(\"Bạn không đủ số tiền để mua!\");}else{_this.props.dataUser.body.inventory.moneyAmount-=20;axios({method:\"post\",url:baseURL+\"/farm/buy-tool\",data:{username:_this.props.username,amount:1,toolType:type}}).then(function(res){res.data.status===1?alert(\"Buy success!\"):alert(\"Error\");});}}else if(type==4){if(_this.props.dataUser.body.inventory.moneyAmount<10){alert(\"Bạn không đủ số tiền để mua!\");}else{_this.props.dataUser.body.inventory.moneyAmount-=10;axios({method:\"post\",url:baseURL+\"/farm/buy-tool\",data:{username:_this.props.username,amount:1,toolType:type}}).then(function(res){res.data.status===1?alert(\"Buy success!\"):alert(\"Error\");});}}};_this.handleBuyPLant=function(type){var arr=_toConsumableArray(_this.state.arrPlantsInInventory);arr[type]=_objectSpread(_objectSpread({},arr[type]),{},{amount:arr[type].amount+1});_this.setState({arrPlantsInInventory:arr});_this.props.dataUser.body.inventory.plants[type]++;if(type==0){if(_this.props.dataUser.body.inventory.moneyAmount<100){alert(\"Bạn không đủ số tiền để mua!\");}else{_this.props.dataUser.body.inventory.moneyAmount-=100;axios({method:\"post\",url:baseURL+\"/farm/buy-plant\",data:{username:_this.props.username,amount:1,plantType:type}}).then(function(res){res.data.status===1?alert(\"Buy success!\"):alert(\"Error\");});}}else if(type==1){if(_this.props.dataUser.body.inventory.moneyAmount<200){alert(\"Bạn không đủ số tiền để mua!\");}else{_this.props.dataUser.body.inventory.moneyAmount-=200;axios({method:\"post\",url:baseURL+\"/farm/buy-plant\",data:{username:_this.props.username,amount:1,plantType:type}}).then(function(res){res.data.status===1?alert(\"Buy success!\"):alert(\"Error\");});}}};return _this;}_createClass(Farm,[{key:\"render\",value:function render(){console.log(\"Hello Farm: \",this.props.dataUser.body.inventory.lands);return/*#__PURE__*/_jsxs(\"div\",{className:\"farm-background\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/farm/shop\",exact:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"shopTool\",children:[/*#__PURE__*/_jsx(SidebarItem,{arrItems:this.state.arrItems,openShop:true,handleUseItem:this.handleUseItem,dataUser:this.props.dataUser}),/*#__PURE__*/_jsx(ShopTool,{moneyAmount:this.props.dataUser.body.inventory.moneyAmount,handleBuyItem:this.handleBuyItem,handleBuyPLant:this.handleBuyPLant})]})}),/*#__PURE__*/_jsx(Route,{path:\"/farm\",exact:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"farm\",children:[/*#__PURE__*/_jsx(SidebarItem,{arrItems:this.state.arrItems,openShop:false,handleUseItem:this.handleUseItem,dataUser:this.props.dataUser}),/*#__PURE__*/_jsx(Land,{arrPlantsInInventory:this.state.arrPlantsInInventory,dataUser:this.props.dataUser,username:this.props.username})]})})]})})]});}}]);return Farm;}(Component);export{Farm as default};","map":{"version":3,"sources":["E:/Code/Project/FunFarm/client/src/views/farm/Farm.js"],"names":["React","Component","Nav","SidebarItem","Land","BrowserRouter","Router","Route","Switch","ShopTool","smallPot","bigPot","water","scarecrow","greenhouse","mama","axios","baseURL","Farm","state","moneyAmount","reload","arrItems","type","amount","img","arrPlantsInInventory","name","sapling","arrPlants","handleUseItem","alert","arr","setState","props","dataUser","body","inventory","tools","handleBuyItem","method","url","data","username","toolType","then","res","status","handleBuyPLant","plants","plantType","console","log","lands"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Nav from \"../../components/Nav\";\r\nimport SidebarItem from \"../../components/SidebarItem.js\";\r\nimport Land from \"./Land\";\r\nimport \"../../styles/Farm.scss\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport ShopTool from \"./ShopTool\";\r\nimport smallPot from \"../../assets/images/smallPot.png\";\r\nimport bigPot from \"../../assets/images/bigPot.png\";\r\nimport water from \"../../assets/images/water.png\";\r\nimport scarecrow from \"../../assets/images/scarecrow.png\";\r\nimport greenhouse from \"../../assets/images/greenhouse.png\";\r\nimport sapling from \"../../assets/images/sapling.svg\";\r\nimport mama from \"../../assets/images/mama.png\";\r\nimport axios from \"axios\";\r\n\r\nconst baseURL = \"http://localhost:3000\";\r\n\r\nexport default class Farm extends Component {\r\n  state = {\r\n    moneyAmount: 500,\r\n    reload: false,\r\n    arrItems: [\r\n      { type: 1, amount: 0, img: smallPot },\r\n      { type: 2, amount: 0, img: bigPot },\r\n      { type: 3, amount: 0, img: water },\r\n      { type: 4, amount: 0, img: scarecrow },\r\n      { type: 5, amount: 0, img: greenhouse },\r\n    ],\r\n    arrPlantsInInventory: [\r\n      { name: \"sapling\", type: 0, amount: 2, img: sapling },\r\n      { name: \"mama\", type: 1, amount: 1, img: mama },\r\n    ],\r\n    arrPlants: [],\r\n  };\r\n\r\n  handleUseItem = (type) => {\r\n    if (this.state.arrItems[type].amount < 1) {\r\n      alert(\"dont enought item!\");\r\n      return;\r\n    }\r\n    let arr = [...this.state.arrItems];\r\n    arr[type] = { ...arr[type], amount: arr[type].amount - 1 };\r\n    this.setState({ arrItems: arr });\r\n\r\n    this.props.dataUser.body.inventory.tools[type]--;\r\n\r\n    \r\n  };\r\n\r\n  handleBuyItem = (type) => {\r\n    //mảng test bên client\r\n    let arr = [...this.state.arrItems];\r\n    arr[type] = { ...arr[type], amount: arr[type].amount + 1 };\r\n    this.setState({ arrItems: arr });\r\n    this.props.dataUser.body.inventory.tools[type]++;\r\n\r\n    if (type == 0) {\r\n      if (this.props.dataUser.body.inventory.moneyAmount < 50) {\r\n        alert(\"Bạn không đủ số tiền để mua!\")\r\n      } else {\r\n        this.props.dataUser.body.inventory.moneyAmount -= 50;\r\n        axios({\r\n          method: \"post\",\r\n          url: baseURL + \"/farm/buy-tool\",\r\n          data: {\r\n            username: this.props.username,\r\n            amount: 1,\r\n            toolType: type,\r\n          },\r\n        }).then((res) => {\r\n          res.data.status === 1 ? alert(\"Buy success!\") : alert(\"Error\");\r\n        });\r\n      }\r\n    } else if (type == 1) {\r\n      if (this.props.dataUser.body.inventory.moneyAmount < 100) {\r\n        alert(\"Bạn không đủ số tiền để mua!\");\r\n      } else {\r\n        this.props.dataUser.body.inventory.moneyAmount -= 100;\r\n        axios({\r\n          method: \"post\",\r\n          url: baseURL + \"/farm/buy-tool\",\r\n          data: {\r\n            username: this.props.username,\r\n            amount: 1,\r\n            toolType: type,\r\n          },\r\n        }).then((res) => {\r\n          res.data.status === 1 ? alert(\"Buy success!\") : alert(\"Error\");\r\n        });\r\n      }\r\n    } else if (type == 2) {\r\n      if (this.props.dataUser.body.inventory.moneyAmount < 50) {\r\n        alert(\"Bạn không đủ số tiền để mua!\");\r\n      } else {\r\n        this.props.dataUser.body.inventory.moneyAmount -= 50;\r\n        axios({\r\n          method: \"post\",\r\n          url: baseURL + \"/farm/buy-tool\",\r\n          data: {\r\n            username: this.props.username,\r\n            amount: 1,\r\n            toolType: type,\r\n          },\r\n        }).then((res) => {\r\n          res.data.status === 1 ? alert(\"Buy success!\") : alert(\"Error\");\r\n        });\r\n      }\r\n    } else if (type == 3) {\r\n      if (this.props.dataUser.body.inventory.moneyAmount < 20) {\r\n        alert(\"Bạn không đủ số tiền để mua!\");\r\n      } else {\r\n        this.props.dataUser.body.inventory.moneyAmount -= 20;\r\n        axios({\r\n          method: \"post\",\r\n          url: baseURL + \"/farm/buy-tool\",\r\n          data: {\r\n            username: this.props.username,\r\n            amount: 1,\r\n            toolType: type,\r\n          },\r\n        }).then((res) => {\r\n          res.data.status === 1 ? alert(\"Buy success!\") : alert(\"Error\");\r\n        });\r\n      }\r\n    } else if (type == 4) {\r\n      if (this.props.dataUser.body.inventory.moneyAmount < 10) {\r\n        alert(\"Bạn không đủ số tiền để mua!\");\r\n      } else {\r\n        this.props.dataUser.body.inventory.moneyAmount -= 10;\r\n        axios({\r\n          method: \"post\",\r\n          url: baseURL + \"/farm/buy-tool\",\r\n          data: {\r\n            username: this.props.username,\r\n            amount: 1,\r\n            toolType: type,\r\n          },\r\n        }).then((res) => {\r\n          res.data.status === 1 ? alert(\"Buy success!\") : alert(\"Error\");\r\n        });\r\n      }\r\n    }\r\n  };\r\n  \r\n  handleBuyPLant = (type) => {\r\n    let arr = [...this.state.arrPlantsInInventory];\r\n    arr[type] = { ...arr[type], amount: arr[type].amount + 1 };\r\n    this.setState({ arrPlantsInInventory: arr });\r\n\r\n    this.props.dataUser.body.inventory.plants[type]++;\r\n\r\n    if (type == 0) {\r\n      if (this.props.dataUser.body.inventory.moneyAmount < 100) {\r\n        alert(\"Bạn không đủ số tiền để mua!\");\r\n      } else {\r\n        this.props.dataUser.body.inventory.moneyAmount -= 100;\r\n        axios({\r\n          method: \"post\",\r\n          url: baseURL + \"/farm/buy-plant\",\r\n          data: {\r\n            username: this.props.username,\r\n            amount: 1,\r\n            plantType: type,\r\n          },\r\n        }).then((res) => {\r\n          res.data.status === 1 ? alert(\"Buy success!\") : alert(\"Error\");\r\n        });\r\n      }\r\n    } else if (type == 1) {\r\n      if (this.props.dataUser.body.inventory.moneyAmount < 200) {\r\n        alert(\"Bạn không đủ số tiền để mua!\");\r\n      } else {\r\n        this.props.dataUser.body.inventory.moneyAmount -= 200;\r\n        axios({\r\n          method: \"post\",\r\n          url: baseURL + \"/farm/buy-plant\",\r\n          data: {\r\n            username: this.props.username,\r\n            amount: 1,\r\n            plantType: type,\r\n          },\r\n        }).then((res) => {\r\n          res.data.status === 1 ? alert(\"Buy success!\") : alert(\"Error\");\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    console.log(\"Hello Farm: \", this.props.dataUser.body.inventory.lands);\r\n    return (\r\n      <div className=\"farm-background\">\r\n        <Nav />\r\n        <Router>\r\n          <Switch>\r\n            <Route path=\"/farm/shop\" exact>\r\n              <div className=\"shopTool\">\r\n                <SidebarItem\r\n                  arrItems={this.state.arrItems}\r\n                  openShop={true}\r\n                  handleUseItem={this.handleUseItem}\r\n                  dataUser={this.props.dataUser}\r\n                />\r\n                <ShopTool\r\n                  moneyAmount={this.props.dataUser.body.inventory.moneyAmount}\r\n                  handleBuyItem={this.handleBuyItem}\r\n                  handleBuyPLant={this.handleBuyPLant}\r\n                />\r\n              </div>\r\n            </Route>\r\n            <Route path=\"/farm\" exact>\r\n              <div className=\"farm\">\r\n                <SidebarItem\r\n                  arrItems={this.state.arrItems}\r\n                  openShop={false}\r\n                  handleUseItem={this.handleUseItem}\r\n                  dataUser={this.props.dataUser}\r\n                />\r\n                <Land\r\n                  arrPlantsInInventory={this.state.arrPlantsInInventory}\r\n                  dataUser={this.props.dataUser}\r\n                  username={this.props.username}\r\n                />\r\n              </div>\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}